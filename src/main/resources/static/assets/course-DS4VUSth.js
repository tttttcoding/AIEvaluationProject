import{i as N,e as b,f as s,t as d,k as o,w as n,l as v,O as P,m as i,o as m,_ as R,r,j as Q,n as $,q as I,p as C,y as W,A as T,E as L,g as X}from"./index-uf0FIciC.js";import{u as Y}from"./useTeacherStore-DNvmoMZn.js";const Z={class:"course-card"},ee={class:"course-image"},le=["src","alt"],se={class:"course-info"},oe={class:"course-name"},te={class:"classes-info"},ae={class:"classes-text"},ne=N({__name:"teaCard",props:{course:{}},setup(S){return(t,p)=>{const _=i("el-icon");return m(),b("div",Z,[s("div",ee,[s("img",{src:t.course.imageUrl,alt:t.course.name,class:"image"},null,8,le)]),s("div",se,[s("h3",oe,d(t.course.name),1),s("div",te,[o(_,null,{default:n(()=>[o(v(P))]),_:1}),s("span",ae,d(t.course.classes),1)])])])}}}),ie=R(ne,[["__scopeId","data-v-9de39866"]]),ue={class:"action-bar"},re={class:"course-grid"},de={class:"course-detail"},ce={class:"detail-header"},pe={class:"detail-actions"},_e={class:"detail-content"},me={class:"detail-item"},ve={class:"detail-item"},fe={class:"detail-item"},ge={class:"description"},Ce={style:{float:"left"}},be={style:{float:"right",color:"var(--el-text-color-secondary)","font-size":"13px"}},Ve={class:"dialog-footer"},we=N({__name:"course",setup(S){X();const t=Y(),p=r(!1),_=r(!1),V=r("create"),a=r({id:"",course:"",description:"",cno:""}),w=r(!0),h=r(!1),c=r(null),z=r([]),x=(u,e)=>{V.value=u,p.value=!0,u==="edit"&&e?(a.value={...e},w.value=!1):(w.value=!0,a.value={id:"",course:"",description:"",cno:""})},E=()=>{if(!a.value.course){L.warning("请输入课程名称");return}if(a.value.cno===""){L.warning("请选择班级");return}console.log("课程表单数据:",a.value),w.value?t.createCourse(a.value.course,a.value.description,a.value.cno):t.changeCourse(Number(a.value.id),a.value.course,a.value.description,a.value.cno),t.fetchCourseList(),L.success(V.value==="create"?"创建成功":"更新成功"),t.fetchClassList(),t.fetchCourseList(),p.value=!1},q=async u=>{let e=t.filterClassId(u);console.log("查看评价记录的班级ID:",u," ",e),await t.fetchHistoryByClass(e),setTimeout(()=>{_.value=!0},100)},F=u=>{c.value=u,z.value=u.cno,h.value=!0},M=u=>{_.value=!1,u.username};return Q(()=>{setTimeout(()=>{t.fetchClassList(),t.fetchCourseList()},100),console.log("班级列表:",t.classList),console.log("课程列表:",t.courseList)}),(u,e)=>{const j=i("el-icon"),f=i("el-button"),A=i("el-drawer"),U=i("el-input"),y=i("el-form-item"),H=i("el-option"),O=i("el-select"),G=i("el-form"),B=i("el-dialog"),g=i("el-table-column"),J=i("el-table");return m(),b($,null,[e[17]||(e[17]=s("div",{class:"course-page"},"课程管理",-1)),s("div",ue,[o(f,{type:"primary",onClick:e[0]||(e[0]=l=>x("create"))},{default:n(()=>[o(j,null,{default:n(()=>[o(v(W))]),_:1}),e[10]||(e[10]=C("创建新课程 "))]),_:1,__:[10]})]),s("div",re,[(m(!0),b($,null,I(v(t).courseList,l=>(m(),T(ie,{key:l.id,course:{imageUrl:"https://a1.x914.com/alight/i/2025/06/05/qzys.png",name:l.course,classes:l.cno},onClick:k=>F(l)},null,8,["course","onClick"]))),128))]),o(A,{modelValue:h.value,"onUpdate:modelValue":e[3]||(e[3]=l=>h.value=l),title:"课程详情",size:"50%","destroy-on-close":!0},{default:n(()=>{var l,k,D;return[s("div",de,[s("div",ce,[s("h2",null,d((l=c.value)==null?void 0:l.course),1),s("div",pe,[o(f,{type:"primary",onClick:e[1]||(e[1]=K=>x("edit",c.value))},{default:n(()=>e[11]||(e[11]=[C(" 修改课程 ")])),_:1,__:[11]})])]),s("div",_e,[s("div",me,[e[12]||(e[12]=s("span",{class:"label"},"课程ID：",-1)),s("span",null,d((k=c.value)==null?void 0:k.id),1)]),s("div",ve,[e[13]||(e[13]=s("span",{class:"label"},"所属班级：",-1)),s("span",{class:"clickable-class",onClick:e[2]||(e[2]=K=>q(c.value.cno))},d(c.value.cno),1)]),s("div",fe,[e[14]||(e[14]=s("span",{class:"label"},"课程描述：",-1)),s("p",ge,d((D=c.value)==null?void 0:D.description),1)])])])]}),_:1},8,["modelValue"]),o(B,{title:V.value==="create"?"创建新课程":"编辑课程",modelValue:p.value,"onUpdate:modelValue":e[8]||(e[8]=l=>p.value=l),width:"500px"},{footer:n(()=>[s("span",Ve,[o(f,{onClick:e[7]||(e[7]=l=>p.value=!1)},{default:n(()=>e[15]||(e[15]=[C("取消")])),_:1,__:[15]}),o(f,{type:"primary",onClick:E},{default:n(()=>e[16]||(e[16]=[C("保存")])),_:1,__:[16]})])]),default:n(()=>[o(G,{model:a.value,"label-width":"90px"},{default:n(()=>[o(y,{label:"课程名称"},{default:n(()=>[o(U,{modelValue:a.value.course,"onUpdate:modelValue":e[4]||(e[4]=l=>a.value.course=l),placeholder:"请输入课程名称"},null,8,["modelValue"])]),_:1}),o(y,{label:"课程描述"},{default:n(()=>[o(U,{type:"textarea",modelValue:a.value.description,"onUpdate:modelValue":e[5]||(e[5]=l=>a.value.description=l),placeholder:"请输入课程描述",rows:3},null,8,["modelValue"])]),_:1}),o(y,{label:"所属班级"},{default:n(()=>[o(O,{modelValue:a.value.cno,"onUpdate:modelValue":e[6]||(e[6]=l=>a.value.cno=l),"collapse-tags":"",placeholder:"请选择班级",style:{width:"100%"}},{default:n(()=>[(m(!0),b($,null,I(v(t).classList,l=>(m(),T(H,{key:l.id,label:l.name,value:l.id},{default:n(()=>[s("span",Ce,d(l.name),1),s("span",be,d(l.id),1)]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["title","modelValue"]),o(B,{title:"学生评价记录",modelValue:_.value,"onUpdate:modelValue":e[9]||(e[9]=l=>_.value=l),width:"80%"},{default:n(()=>[o(J,{data:v(t).rates,style:{width:"100%"},"highlight-current-row":"",stripe:"",onRowClick:M},{default:n(()=>[o(g,{prop:"username",label:"昵称",width:"140"}),o(g,{prop:"nickname",label:"用户名",width:"140"}),o(g,{prop:"review",label:"工具评价次数",width:"140"}),o(g,{prop:"report",label:"作业提交次数",width:"140"})]),_:1},8,["data"])]),_:1},8,["modelValue"])],64)}}}),ke=R(we,[["__scopeId","data-v-58263931"]]);export{ke as default};
