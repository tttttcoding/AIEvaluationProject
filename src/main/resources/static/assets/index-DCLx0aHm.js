import{g as L,r as w,i as D,J as j,c as i,K as re,a as e,L as F,o as r,_ as R,z as K,M as de,v as ie,N as I,h as ue,b as l,O as ce,j as U,w as t,f as v,e as M,F as _,t as P,k as me,P as y,Q as pe,m as T,R as fe,S as ve,n as z}from"./index-D8PVboq4.js";import{u as we}from"./useToolsStore-BjDRuf4g.js";import{u as _e}from"./useSelectedToolStore-ZViEoRSD.js";import"./ToolsService-RoSKOOJw.js";const ke={class:"card-content"},ge={class:"card-header"},he={class:"card-body"},be={class:"card-info"},ye=L({__name:"Card",setup(E){const k=w(!1),u=w(null),g=new IntersectionObserver(m=>{m.forEach(d=>{d.isIntersecting&&(k.value=!0,g.unobserve(d.target))})},{threshold:.05,rootMargin:"100px"});return D(()=>{u.value&&g.observe(u.value)}),j(()=>{g.disconnect()}),(m,d)=>(r(),i("div",{class:re(["card",{"is-visible":k.value}]),ref_key:"cardRef",ref:u},[e("div",ke,[e("div",ge,[F(m.$slots,"header",{},()=>[d[0]||(d[0]=e("img",{src:"#",alt:"Default picture"},null,-1))],!0)]),e("div",he,[F(m.$slots,"default",{},()=>[d[1]||(d[1]=e("p",null,"unknown tool",-1))],!0)]),e("div",be,[F(m.$slots,"info",{},()=>[d[2]||(d[2]=e("div",null,"unknown rating",-1))],!0)])]),d[3]||(d[3]=e("div",{class:"go-corner",href:"#"},[e("div",{class:"go-arrow"},"→")],-1))],2))}}),Ve=R(ye,[["__scopeId","data-v-42fc84d0"]]),Pe={class:"back-top-container"},Ce=L({__name:"backTop",setup(E){const k=w(!1),u=()=>{k.value=window.scrollY>window.innerHeight*.9},g=()=>{window.scrollTo({top:0,behavior:"smooth"})};return D(()=>{window.addEventListener("scroll",u),u()}),j(()=>{window.removeEventListener("scroll",u)}),(m,d)=>K((r(),i("div",Pe,[e("button",{onClick:g},d[0]||(d[0]=[e("div",{class:"text"},[e("span",null,"Back"),e("span",null,"to"),e("span",null,"top")],-1),e("div",{class:"clone"},[e("span",null,"Back"),e("span",null,"to"),e("span",null,"top")],-1),e("svg",{"stroke-width":"2",stroke:"currentColor",viewBox:"0 0 24 24",fill:"none",class:"h-6 w-6",xmlns:"http://www.w3.org/2000/svg",width:"20px"},[e("path",{d:"M14 5l7 7m0 0l-7 7m7-7H3","stroke-linejoin":"round","stroke-linecap":"round"})],-1)]))],512)),[[de,k.value]])}}),Se=R(Ce,[["__scopeId","data-v-10a9f7dc"]]),xe={class:"main-container"},$e={class:"header"},Te={class:"title"},Ne={id:"titleH1"},Fe=["label","name"],Ie=["id"],Ue={class:"cat-main"},Me={class:"tool-logo"},Be=["src","title"],Le={class:"tool-name"},De=["onClick"],Re={class:"tool-info"},Ee={class:"rating"},Oe={class:"rating-score"},Ae={class:"rating-count"},He={key:0,class:"skeleton-container"},Je={class:"skeleton-cards"},qe={key:1,class:"skeleton-container"},ze={class:"skeleton-cards"},je={class:"side-nav"},Ke={class:"backTop"},Qe={class:"dialog-footer"},We={class:"dialog-footer"},B="140px",Ye=L({__name:"index",setup(E){const k=fe(),u=we(),g=_e(),m=w("对话模型"),d=w("AI / LLM 模型工具集"),N=w(!0),S=w(!0),p=ie(),x=w(!1),f=I({name:"",oldPwd:"",newPwd:"",delivery:!1,type:[],resource:"",desc:""}),Q=a=>{a.preventDefault()},O=a=>{g.selectTool(a),k.push("/detail")},A=a=>{m.value=a,localStorage.setItem("activeName",JSON.stringify(a)),G(a)},C=w(!1),H=w(),n=I({nickname:"",oldPassword:"",newPassword:"",confirmPassword:""}),W=I({oldPassword:[{required:!0,message:"请输入旧密码",trigger:"blur"}],newPassword:[{required:!0,message:"请输入新密码",trigger:"blur"},{min:6,max:18,message:"密码长度必须在6-18位之间",trigger:"blur"}],confirmPassword:[{required:!0,message:"请确认新密码",trigger:"blur"},{validator:(a,s,V)=>{s!==n.newPassword?V(new Error("两次输入的密码不一致")):V()},trigger:"blur"}]}),Y=()=>{var a;(a=H.value)==null||a.validate(async s=>{if(s)try{const V=await ve(p.user.token,n.nickname,n.oldPassword,n.newPassword,p.user.username);p.user.token=V.Authorization,p.user.nickname=n.nickname,localStorage.setItem("user",JSON.stringify(p.user)),p.isFresh=0,localStorage.setItem("isFresh",JSON.stringify(p.isFresh)),z.success("修改成功"),C.value=!1,n.oldPassword="",n.newPassword="",n.confirmPassword="",n.nickname=""}catch{z.error("修改失败,请重试")}})};D(async()=>{p.checkAuth(),p.isFresh==1&&(C.value=!0),S.value=!0,N.value=!0,await u.fetchCategory();const a=localStorage.getItem("activeName");m.value=a?JSON.parse(a):"对话模型",A(m.value),S.value=!1,await new Promise(s=>setTimeout(s,100)),N.value=!1});const G=a=>{const s=document.querySelector(`.el-anchor a[href="#${a}"]`);s&&s.click()},X=ue(()=>u.categories.filter(a=>u.loadedCategories.has(a))),Z=()=>{p.changeUserPassword(f.name,f.oldPwd,f.newPwd),x.value=!1};return(a,s)=>{const V=v("el-main"),ee=v("el-footer"),se=v("el-anchor-link"),oe=v("el-anchor"),le=v("el-container"),h=v("el-input"),b=v("el-form-item"),J=v("el-form"),$=v("el-button"),q=v("el-dialog"),te=ce("loading");return r(),i(_,null,[K((r(),U(le,null,{default:t(()=>[e("div",xe,[e("div",$e,[e("div",Te,[e("h1",Ne,P(d.value),1)])]),l(V,{class:"main"},{default:t(()=>[S.value?(r(),i("div",qe,[(r(),i(_,null,y(3,o=>e("div",{key:o,class:"skeleton-category"},[s[15]||(s[15]=e("div",{class:"skeleton-title"},null,-1)),e("div",ze,[(r(),i(_,null,y(4,c=>e("div",{key:c,class:"skeleton-card"},s[14]||(s[14]=[e("div",{class:"skeleton-header"},null,-1),e("div",{class:"skeleton-body"},null,-1),e("div",{class:"skeleton-info"},null,-1)]))),64))])])),64))])):(r(),i(_,{key:0},[(r(!0),i(_,null,y(X.value,o=>(r(),i("div",{label:o,name:o,key:o},[e("div",{class:"card-title",id:o},P(o),9,Ie),e("div",Ue,[(r(!0),i(_,null,y(M(u).toolsByCategory[o],(c,ae)=>(r(),U(Ve,{key:c.id,class:"tool-card",style:pe({"--index":ae%8}),onClick:ne=>O(c)},{header:t(()=>[e("div",Me,[e("img",{src:c.logo_url,title:c.name},null,8,Be),e("div",Le,P(c.name),1)])]),default:t(()=>[e("p",{class:"tool-desc",onClick:ne=>O(c)},P(c.description),9,De)]),info:t(()=>[e("div",Re,[e("div",Ee,[e("span",Oe,P(c.score??Math.floor(Math.random()*5)),1),s[11]||(s[11]=e("span",{style:{"margin-left":"4px"}},"⭐",-1)),e("div",Ae," 已有 "+P(c.ratingCount??Math.floor(Math.random()*100))+" 人评分 ",1)])])]),_:2},1032,["style","onClick"]))),128))])],8,Fe))),128)),N.value?(r(),i("div",He,[(r(),i(_,null,y(2,o=>e("div",{key:o,class:"skeleton-category"},[s[13]||(s[13]=e("div",{class:"skeleton-title"},null,-1)),e("div",Je,[(r(),i(_,null,y(4,c=>e("div",{key:c,class:"skeleton-card"},s[12]||(s[12]=[e("div",{class:"skeleton-header"},null,-1),e("div",{class:"skeleton-body"},null,-1),e("div",{class:"skeleton-info"},null,-1)]))),64))])])),64))])):me("",!0)],64))]),_:1}),l(ee,null,{default:t(()=>s[16]||(s[16]=[e("div",{class:"footer"},"Footer",-1)])),_:1})]),e("aside",je,[l(oe,{offset:65,active:m.value,direction:"vertical",type:"default",onClick:Q,onSelect:A,class:"anchor"},{default:t(()=>[s[17]||(s[17]=e("div",{class:"anchor-title"},"分类导航",-1)),(r(!0),i(_,null,y(M(u).categories,o=>(r(),U(se,{key:o,href:`#${o}`,title:o},null,8,["href","title"]))),128))]),_:1},8,["active"])]),e("div",Ke,[l(Se)])]),_:1})),[[te,S.value]]),l(q,{modelValue:x.value,"onUpdate:modelValue":s[4]||(s[4]=o=>x.value=o),title:"🚀 起一个昵称吧，同时重置密码",width:"600",height:"400","show-close":!1,"close-on-press-escape":!1,"close-on-click-modal":!1},{footer:t(()=>[e("div",Qe,[l($,{onClick:s[3]||(s[3]=o=>x.value=!1)},{default:t(()=>s[18]||(s[18]=[T(" 取消修改 ")])),_:1}),l($,{type:"primary",onClick:Z},{default:t(()=>s[19]||(s[19]=[T(" 确定修改 ")])),_:1})])]),default:t(()=>[l(J,{model:f},{default:t(()=>[l(b,{label:"设置昵称","label-width":B},{default:t(()=>[l(h,{modelValue:f.name,"onUpdate:modelValue":s[0]||(s[0]=o=>f.name=o),autocomplete:"off"},null,8,["modelValue"])]),_:1}),l(b,{label:"输入原密码","label-width":B},{default:t(()=>[l(h,{modelValue:f.oldPwd,"onUpdate:modelValue":s[1]||(s[1]=o=>f.oldPwd=o),autocomplete:"off",type:"password"},null,8,["modelValue"])]),_:1}),l(b,{label:"输入新密码","label-width":B},{default:t(()=>[l(h,{modelValue:f.newPwd,"onUpdate:modelValue":s[2]||(s[2]=o=>f.newPwd=o),autocomplete:"off",type:"password"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"]),l(q,{modelValue:C.value,"onUpdate:modelValue":s[10]||(s[10]=o=>C.value=o),title:`hi! ${M(p).user.username} | 为自己设置一下昵称和密码吧`,width:"400px",center:"","destroy-on-close":"","append-to-body":"","modal-append-to-body":!0,class:"password-dialog","show-close":!1,"close-on-press-escape":!1,"close-on-click-modal":!1},{footer:t(()=>[e("span",We,[l($,{onClick:s[9]||(s[9]=o=>C.value=!1)},{default:t(()=>s[20]||(s[20]=[T("取消")])),_:1}),l($,{type:"primary",onClick:Y},{default:t(()=>s[21]||(s[21]=[T("确认")])),_:1})])]),default:t(()=>[l(J,{model:n,rules:W,ref_key:"passwordFormRef",ref:H,"label-width":"100px","status-icon":""},{default:t(()=>[l(b,{label:"昵称",prop:"nickname"},{default:t(()=>[l(h,{modelValue:n.nickname,"onUpdate:modelValue":s[5]||(s[5]=o=>n.nickname=o),type:"password","show-password":"",placeholder:"请输入昵称"},null,8,["modelValue"])]),_:1}),l(b,{label:"旧密码",prop:"oldPassword"},{default:t(()=>[l(h,{modelValue:n.oldPassword,"onUpdate:modelValue":s[6]||(s[6]=o=>n.oldPassword=o),type:"password","show-password":"",placeholder:"请输入旧密码"},null,8,["modelValue"])]),_:1}),l(b,{label:"新密码",prop:"newPassword"},{default:t(()=>[l(h,{modelValue:n.newPassword,"onUpdate:modelValue":s[7]||(s[7]=o=>n.newPassword=o),type:"password","show-password":"",placeholder:"请输入新密码"},null,8,["modelValue"])]),_:1}),l(b,{label:"确认密码",prop:"confirmPassword"},{default:t(()=>[l(h,{modelValue:n.confirmPassword,"onUpdate:modelValue":s[8]||(s[8]=o=>n.confirmPassword=o),type:"password","show-password":"",placeholder:"请确认新密码"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])],64)}}}),ss=R(Ye,[["__scopeId","data-v-a75cca2d"]]);export{ss as default};
