import{e as I,u as A,C as B,h as o,i as a,b as u,g as e,j as n,U as D,l as d,V as E,W as R,X as q,o as k,_ as b,c as S,r as h,M as T,f as J,F as O,t as v,Y as L,Z as j,$ as G,a0 as W,a1 as X,a2 as Y,a3 as Z,E as N,m as H,S as K}from"./index-Bn9PkK3f.js";import{I as Q,T as ee}from"./github.vue_vue_type_style_index_0_scoped_c5cc798f_lang-CgfJmLkw.js";const oe={class:"user-info"},se=" 贡献工具",te=" 联系我们",le=I({__name:"illustrate",setup(P){const l=A(),c=()=>{console.log("handleInstructions")};return(g,s)=>{const _=a("el-icon"),p=a("el-dropdown-item"),C=a("el-dropdown-menu"),x=a("el-dropdown");return k(),B(x,{class:"user-dropdown"},{dropdown:o(()=>[e(C,null,{default:o(()=>[e(p,{onClick:c},{default:o(()=>[e(_,null,{default:o(()=>[e(n(E))]),_:1}),s[3]||(s[3]=d("使用说明 "))]),_:1}),e(p,{onClick:s[0]||(s[0]=i=>n(l).open(()=>se))},{default:o(()=>[e(_,null,{default:o(()=>[e(n(R))]),_:1}),s[4]||(s[4]=d("贡献工具 "))]),_:1}),e(p,{onClick:s[1]||(s[1]=i=>n(l).open(()=>te))},{default:o(()=>[e(_,null,{default:o(()=>[e(n(q))]),_:1}),s[5]||(s[5]=d("联系我们 "))]),_:1})]),_:1})]),default:o(()=>[u("div",oe,[s[2]||(s[2]=u("span",{class:"help-content"},"使用帮助",-1)),e(_,{class:"el-icon--right"},{default:o(()=>[e(n(D))]),_:1})])]),_:1})}}}),ne=b(le,[["__scopeId","data-v-8eb7353d"]]),ae={},re={class:"github-content"};function de(P,l){return k(),S("div",re,l[0]||(l[0]=[u("a",{href:"https://github.com/AlightSoulmate/vue-ai-teach",target:"_blank",class:"github-link",title:"front end"},[u("svg",{width:"22",height:"22",viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},[u("path",{d:"M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.58.82-2.14-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82a7.52 7.52 0 012.01-.27c.68.003 1.37.09 2.01.27 1.52-1.03 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.14 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"})])],-1)]))}const ue=b(ae,[["render",de],["__scopeId","data-v-c5cc798f"]]),ie={class:"user-info"},ce={class:"username"},_e={class:"dialog-footer"},pe="",me=I({__name:"mine",setup(P){const l=A(),c=h(!1),g=h(),s=T({oldPassword:"",newPassword:"",confirmPassword:""}),_=T({oldPassword:[{required:!0,message:"请输入旧密码",trigger:"blur"}],newPassword:[{required:!0,message:"请输入新密码",trigger:"blur"},{min:6,max:18,message:"密码长度必须在6-18位之间",trigger:"blur"}],confirmPassword:[{required:!0,message:"请确认新密码",trigger:"blur"},{validator:(i,t,m)=>{t!==s.newPassword?m(new Error("两次输入的密码不一致")):m()},trigger:"blur"}]}),p=()=>{var i;(i=g.value)==null||i.validate(async t=>{if(t)try{const m=await Z(l.user.token,l.user.nickname,s.oldPassword,s.newPassword,l.user.username);l.user.token=m.Authorization,localStorage.setItem("user",JSON.stringify(l.user)),l.isFresh=0,localStorage.setItem("isFresh",JSON.stringify(l.isFresh)),N.success("密码修改成功"),c.value=!1,s.oldPassword="",s.newPassword="",s.confirmPassword=""}catch{N.error("密码修改失败,请重试")}})},C=()=>{H.confirm("你确定退出登录吗？下次登录需重新输入用户名密码").then(()=>{l.logout(),console.log("退出登录")}).catch(i=>{console.error(i)})},x=()=>{l.changeUserNickname()};return J(()=>{const i=localStorage.getItem("user");l.user=i?JSON.parse(i):{id:0,username:"未登录",role:"未登录",token:"未登录"}}),(i,t)=>{const m=a("el-avatar"),f=a("el-icon"),w=a("el-dropdown-item"),F=a("el-dropdown-menu"),M=a("el-dropdown"),V=a("el-input"),y=a("el-form-item"),U=a("el-form"),$=a("el-button"),z=a("el-dialog");return k(),S(O,null,[e(M,{class:"user-dropdown"},{dropdown:o(()=>[e(F,null,{default:o(()=>[e(w,null,{default:o(()=>[e(f,null,{default:o(()=>[e(n(L))]),_:1}),d("ID: "+v(n(l).user.id),1)]),_:1}),e(w,null,{default:o(()=>[e(f,null,{default:o(()=>[e(n(j))]),_:1}),d("账号："+v(n(l).user.username),1)]),_:1}),e(w,null,{default:o(()=>[e(f,null,{default:o(()=>[e(n(G))]),_:1}),d(" 身份: "+v(n(l).currentRoleCN),1)]),_:1}),e(w,{onClick:x},{default:o(()=>[e(f,null,{default:o(()=>[e(n(W))]),_:1}),t[6]||(t[6]=d("修改昵称 "))]),_:1}),e(w,{onClick:t[0]||(t[0]=r=>c.value=!0)},{default:o(()=>[e(f,null,{default:o(()=>[e(n(X))]),_:1}),t[7]||(t[7]=d("修改密码 "))]),_:1}),e(w,{onClick:C,divided:""},{default:o(()=>[e(f,null,{default:o(()=>[e(n(Y))]),_:1}),t[8]||(t[8]=d("退出登录 "))]),_:1})]),_:1})]),default:o(()=>[u("div",ie,[e(m,{size:32,src:pe},{default:o(()=>{var r;return[d(v((r=n(l).user.nickname)==null?void 0:r.charAt(0)),1)]}),_:1}),u("span",ce,v(n(l).user.nickname),1)])]),_:1}),e(z,{modelValue:c.value,"onUpdate:modelValue":t[5]||(t[5]=r=>c.value=r),title:"修改密码",width:"400px",center:"","destroy-on-close":"","append-to-body":"","modal-append-to-body":!0,class:"password-dialog"},{footer:o(()=>[u("span",_e,[e($,{onClick:t[4]||(t[4]=r=>c.value=!1)},{default:o(()=>t[9]||(t[9]=[d("取消")])),_:1}),e($,{type:"primary",onClick:p},{default:o(()=>t[10]||(t[10]=[d("确认")])),_:1})])]),default:o(()=>[e(U,{model:s,rules:_,ref_key:"passwordFormRef",ref:g,"label-width":"100px","status-icon":""},{default:o(()=>[e(y,{label:"旧密码",prop:"oldPassword"},{default:o(()=>[e(V,{modelValue:s.oldPassword,"onUpdate:modelValue":t[1]||(t[1]=r=>s.oldPassword=r),type:"password","show-password":"",placeholder:"请输入旧密码"},null,8,["modelValue"])]),_:1}),e(y,{label:"新密码",prop:"newPassword"},{default:o(()=>[e(V,{modelValue:s.newPassword,"onUpdate:modelValue":t[2]||(t[2]=r=>s.newPassword=r),type:"password","show-password":"",placeholder:"请输入新密码"},null,8,["modelValue"])]),_:1}),e(y,{label:"确认密码",prop:"confirmPassword"},{default:o(()=>[e(V,{modelValue:s.confirmPassword,"onUpdate:modelValue":t[3]||(t[3]=r=>s.confirmPassword=r),type:"password","show-password":"",placeholder:"请确认新密码"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"])],64)}}}),fe=b(me,[["__scopeId","data-v-d365ac4a"]]),we={class:"nav"},ge={class:"glass-effect"},ve={class:"nav-left"},he=["src"],ke={class:"nav-right"},be=I({__name:"index",setup(P){const l=K(),c=h("https://a1.x914.com/alight/i/AITeach/white-zisu-logo.png"),g=h("https://a1.x914.com/alight/i/AITeach/black-zisu-logo.png"),s=()=>{window.open("https://www.zisu.edu.cn/","_blank")};return(_,p)=>(k(),S("div",we,[u("div",ge,[u("div",ve,[e(Q),u("img",{src:n(l).isDarkTheme?g.value:c.value,alt:"logo",class:"logo",onClick:s},null,8,he)]),u("div",ke,[e(ne),e(ue),e(ee),e(fe)])])]))}}),xe=b(be,[["__scopeId","data-v-b89ed8e3"]]);export{xe as T};
