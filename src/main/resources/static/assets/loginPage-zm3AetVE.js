import{h as I,W as E,r as u,b as l,e as t,j as p,k as O,o as c,_ as C,d as D,c as T,i as M,m as $,z as w,ac as S,t as b,X as R}from"./index-DvWpKrQb.js";import{I as A,T as F}from"./theme-QY3FripL.js";import{a as J,g as j}from"./ToolsService-JFaD2gMm.js";const q={class:"nav"},L={class:"glass-effect"},P={class:"nav-left"},V=["src"],H={class:"nav-right"},W=I({__name:"index",setup(o){const a=E(),n=u("https://a1.x914.com/alight/i/AITeach/white-zisu-logo.png"),i=u("https://a1.x914.com/alight/i/AITeach/black-zisu-logo.png");return(h,g)=>(c(),l("div",q,[t("div",L,[t("div",P,[p(A),t("img",{src:O(a).isDarkTheme?i.value:n.value,alt:"logo",class:"logo"},null,8,V)]),t("div",H,[p(F)])])]))}}),X=C(W,[["__scopeId","data-v-c034a04f"]]),G={};function K(o,a){return c(),l("button",null,"开始使用")}const Q=C(G,[["render",K],["__scopeId","data-v-4142964b"]]),U=D("loginTools",()=>{const o=u([]),a=u({}),n=u(!1),i=u(new Set),h=2*24*60*60*1e3,g=async()=>{const e=localStorage.getItem("loginToolCategories"),y=localStorage.getItem("loginToolsByCategory");if(e&&y)try{const r=JSON.parse(e),v=JSON.parse(y);return r!=null&&r.length?(o.value=r,a.value=v,i.value=new Set(r),!0):!1}catch(r){console.error("登录页缓存数据解析失败:",r)}return!1},d=()=>{try{o.value.length>0&&(localStorage.setItem("loginToolCategories",JSON.stringify(o.value)),localStorage.setItem("loginToolsByCategory",JSON.stringify(a.value)),localStorage.setItem("loginToolsCacheTime",Date.now().toString()))}catch(e){console.error("保存登录页缓存失败:",e)}},x=()=>{const e=localStorage.getItem("loginToolsCacheTime");return!e||Date.now()-parseInt(e)>h},s=async(e,y=!1)=>{for(let v=0;v<e.length;v+=3){const N=e.slice(v,v+3).map(async f=>{try{const m=await j(f);m!=null&&m.tools&&(a.value[f]=m.tools.map(B),i.value.add(f),y||d())}catch(m){console.error(`获取 ${f} 工具失败:`,m),a.value[f]=[]}});await Promise.all(N)}},_=async()=>{o.value.length&&await s(o.value.slice(0,2))},k=async()=>{o.value.length&&(await s(o.value.slice(2),!0),Object.keys(a.value).length===o.value.length&&d())},z=async()=>{try{if(n.value=!0,!x()&&await g())return;const e=await J();e!=null&&e.categories&&(o.value=e.categories,await _(),await k())}catch(e){console.error("获取登录页数据异常:",e),await g()}finally{n.value=!1}},B=e=>({id:e.id,name:e.name,logo_url:e.logo_url,url:e.url,description:e.description,score:e.score||0,ratingCount:e.ratingCount||0,category:e.category});return{categories:o,toolsByCategory:a,isLoading:n,fetchCategory:z}}),Y={class:"slider-container"},Z={class:"slider",style:{"--width":"100px","--height":"80px","--quantity":"20"}},ee={class:"list"},te=["src","alt","title"],se={class:"slider",reverse:"true",style:{"--width":"100px","--height":"80px","--quantity":"20"}},oe={class:"list"},ae=["src","alt","title"],ne={class:"slider",style:{"--width":"100px","--height":"80px","--quantity":"20"}},le={class:"list"},ce=["src","alt","title"],ie=I({__name:"carousel",setup(o){const a=U(),n=T(()=>Object.values(a.toolsByCategory||{}).flat()),i=T(()=>n.value.length?[...n.value].sort(()=>.5-Math.random()).slice(0,20):[]),h=T(()=>n.value.length?[...n.value].sort(()=>.5-Math.random()).slice(0,20):[]),g=T(()=>n.value.length?[...n.value].sort(()=>.5-Math.random()).slice(0,20):[]);return M(()=>{a.fetchCategory()}),(d,x)=>(c(),l("div",Y,[t("div",Z,[t("div",ee,[(c(!0),l($,null,w(i.value,(s,_)=>(c(),l("div",{class:"item",key:`row1-${s.id}`,style:S(`--position:${_+1}`)},[t("img",{src:s.logo_url,alt:s.name,title:s.name},null,8,te)],4))),128))])]),t("div",se,[t("div",oe,[(c(!0),l($,null,w(h.value,(s,_)=>(c(),l("div",{class:"item",key:`row2-${s.id}`,style:S(`--position:${_+1}`)},[t("img",{src:s.logo_url,alt:s.name,title:s.name},null,8,ae)],4))),128))])]),t("div",ne,[t("div",le,[(c(!0),l($,null,w(g.value,(s,_)=>(c(),l("div",{class:"item",key:`row3-${s.id}`,style:S(`--position:${_+1}`)},[t("img",{src:s.logo_url,alt:s.name,title:s.name},null,8,ce)],4))),128))])])]))}}),re=C(ie,[["__scopeId","data-v-2033a7a3"]]),ue={class:"login-page"},de={class:"top-nav"},_e={class:"hero-section"},he={class:"hero-content"},ge={class:"title"},ve={class:"front"},me={class:"end"},fe={class:"enter"},pe={class:"hero-image"},ye={class:"carousel"},Te=I({__name:"loginPage",setup(o){const a=R(),n=u("浙江外国语学院"),i=u("AI智能教学平台"),h=()=>{a.push("/form")};return(g,d)=>(c(),l("div",ue,[t("nav",de,[p(X)]),t("div",_e,[d[0]||(d[0]=t("div",{class:"decorative-elements"},[t("div",{class:"circle circle-1"})],-1)),t("div",he,[t("div",ge,[t("div",ve,b(n.value),1),t("div",me,b(i.value),1)]),t("div",fe,[p(Q,{class:"enter-inner",onClick:h})])]),t("div",pe,[t("div",ye,[p(re,{class:"carousel-inner"})])])])]))}}),Ie=C(Te,[["__scopeId","data-v-a673fb0d"]]);export{Ie as default};
