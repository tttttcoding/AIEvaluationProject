import{d as f,r as s,c as m,E as u}from"./index-DvWpKrQb.js";import{g as d,a as y}from"./ToolsService-JFaD2gMm.js";const S=f("tools",()=>{const o=s([]),l=s([]),r=s(!1),t=s(""),c=s(0),n=async e=>{if(o.value.length){r.value=!0;try{const a=await d(e);a!=null&&a.tools&&(localStorage.setItem("activeName",JSON.stringify(e)),l.value=a.tools.map(g),t.value=e,c.value=a.tools.length)}catch(a){throw u.error("工具数据获取异常"),a}finally{r.value=!1}}},i=async()=>{try{r.value=!0;const e=await y();e!=null&&e.categories&&(o.value=e.categories,t.value=JSON.parse(localStorage.getItem("activeName")||'""'),t.value||(t.value=o.value[0],localStorage.setItem("activeName",o.value[0])),await n(t.value))}catch{u.error("数据获取异常")}finally{r.value=!1}},g=e=>({id:e.id,name:e.name,logo_url:e.logo_url,url:e.url,description:e.description,score:e.score,ratingCount:e.ratingCount,category:e.category}),v=m(()=>l.value);return{categories:o,currentTools:v,isLoading:r,loadedCategory:t,loadedToolsCount:c,currentCategoryTools:l,loadCategoryTools:n,fetchCategory:i}});export{S as u};
